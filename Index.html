<!DOCTYPE html>
<html>
<head>
  <title>Chat com Ably</title>
  <style>
    ul { list-style-type: none; margin: 0; padding: 0; }
    li { padding: 8px; margin-bottom: 10px; background: #f2f2f2; }
  </style>
</head>
<body>
  <ul id="messages"></ul>
  <form id="form">
    <input id="input" autocomplete="off" /><button>Send</button>
  </form>
  <!-- Ably SDK -->
  <script src="https://cdn.ably.io/lib/ably.min-1.js"></script>
  <script>
    // Solicitar nome do usu√°rio
    let username = '';
    while (!username) {
      username = prompt('Digite seu nome:');
    }

    // Sua chave de API do Ably
    const ably = new Ably.Realtime('ynrGug.SXDJOg:aoStJmyUcLlpwgEzYsJt8CFDsTBCq-yMjqNn6_DkgvM');
    const channel = ably.channels.get('chat');

    // Receber mensagens
    channel.subscribe('message', function(message) {
      const data = message.data;
      const item = document.createElement('li');
      item.textContent = `${data.name}: ${data.message}`;
      document.getElementById('messages').appendChild(item);
    });

    // Enviar mensagens
    document.getElementById('form').addEventListener('submit', function(e) {
      e.preventDefault();
      const input = document.getElementById('input');
      channel.publish('message', { name: username, message: input.value });
      input.value = '';
    });
  </script>
</body>
</html>
